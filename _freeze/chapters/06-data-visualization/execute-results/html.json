{
  "hash": "4c423e41e814136e011aca6bc524c5a1",
  "result": {
    "engine": "knitr",
    "markdown": "# Data Visualization {#sec-visualization}\n\n\n::: {.cell}\n\n:::\n\n\n## The Grammar of Graphics\n\nData visualization is both an art and a science. A well-designed graphic can reveal patterns, communicate findings, and guide analysis in ways that tables of numbers cannot. The `ggplot2` package implements a coherent system for creating graphics based on Leland Wilkinson's \"Grammar of Graphics\"—a framework that describes the fundamental components from which all statistical graphics can be built.\n\nJust as grammar provides rules for constructing sentences from words, the grammar of graphics provides rules for constructing visualizations from components. Every graphic is composed of data, aesthetic mappings that connect variables to visual properties, and geometric objects that represent data points. Additional components like scales, statistical transformations, coordinate systems, and facets allow for sophisticated customizations.\n\n![](../images/images_4a.017.jpeg){fig-align=\"center\"}\n\n## Building Plots with ggplot2\n\nThe basic structure of a ggplot2 call begins with the `ggplot()` function, which creates a coordinate system. You add layers to this foundation using the `+` operator.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nThis creates a scatterplot of highway fuel efficiency against engine displacement using the built-in `mpg` dataset. The `aes()` function establishes the aesthetic mapping—which variables map to which visual properties. Here, `displ` maps to the x-axis and `hwy` to the y-axis. The `geom_point()` function adds a layer of points.\n\n## Aesthetic Mappings\n\nAesthetics are visual properties of the plot. Beyond position (x and y), common aesthetics include color, size, shape, and transparency (alpha). You can map variables to these aesthetics to encode additional information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy, color = class)) + \n  geom_point(size = 3, alpha = 0.7)\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n\nNow the color of each point indicates the vehicle class. The legend is created automatically. Note that aesthetics defined inside `aes()` are mapped to variables, while those defined outside (like `size = 3`) apply uniformly to all points.\n\n## Geometric Objects\n\nGeometric objects, or geoms, determine what type of plot you create. Different geoms represent data in different ways.\n\n### Scatterplots with geom_point()\n\nPoints are good for showing the relationship between two continuous variables:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### Line Plots with geom_line() and geom_smooth()\n\nLines connect points in order, useful for time series or showing trends:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  geom_smooth()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nThe `geom_smooth()` function adds a smoothed conditional mean with confidence interval.\n\n### Bar Charts with geom_bar()\n\nBar charts show counts or summaries of categorical data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = cut)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nUse `fill` to color bars by another variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = cut, fill = clarity)) +\n  geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-7-1.png){width=768}\n:::\n:::\n\n\n### Histograms with geom_histogram()\n\nHistograms show the distribution of a continuous variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(diamonds, aes(x = carat)) +\n  geom_histogram(binwidth = 0.1, fill = \"steelblue\", color = \"white\")\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n### Boxplots with geom_boxplot()\n\nBoxplots summarize distributions and highlight outliers:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = class, y = hwy)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-9-1.png){width=768}\n:::\n:::\n\n\n## Combining Multiple Geoms\n\nYou can layer multiple geoms to create richer visualizations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class)) +\n  geom_smooth(se = FALSE, color = \"black\")\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n## Faceting\n\nFaceting creates small multiples—separate panels for subsets of the data. This is powerful for comparing patterns across groups.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  facet_wrap(~ class, nrow = 2)\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-11-1.png){width=864}\n:::\n:::\n\n\nUse `facet_grid()` for two-variable faceting:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  facet_grid(drv ~ cyl)\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-12-1.png){width=864}\n:::\n:::\n\n\n## Labels and Titles\n\nAdd informative labels with the `labs()` function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point() +\n  geom_smooth(se = FALSE) +\n  labs(\n    title = \"Fuel Efficiency Decreases with Engine Size\",\n    subtitle = \"Data from EPA fuel economy tests\",\n    caption = \"Source: fueleconomy.gov\",\n    x = \"Engine Displacement (liters)\",\n    y = \"Highway Fuel Efficiency (mpg)\",\n    color = \"Vehicle Class\"\n  )\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-13-1.png){width=768}\n:::\n:::\n\n\n## Themes\n\nThemes control the non-data aspects of the plot—background, grid lines, fonts, etc. ggplot2 includes several built-in themes:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](06-data-visualization_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nOther built-in themes include `theme_minimal()`, `theme_bw()`, `theme_light()`, and `theme_dark()`. The `ggthemes` package provides many additional themes.\n\n## Choosing the Right Plot\n\nChoosing an appropriate visualization depends on the types of variables you want to display and the message you want to convey.\n\n![](../images/Chart_flow_chart.jpeg){fig-align=\"center\"}\n\nFor one categorical variable, use bar charts. For one continuous variable, use histograms or density plots. For two continuous variables, use scatterplots. For one continuous and one categorical, use boxplots or violin plots. For two categorical variables, use stacked or grouped bar charts or heat maps.\n\n## Principles of Effective Visualization\n\nEdward Tufte articulated principles of graphical excellence that remain influential: \"Graphical excellence is that which gives to the viewer the greatest number of ideas in the shortest time with the least ink in the smallest space.\"\n\nKey principles include:\n\n**Show the data.** Above all else, make the data visible. Avoid chart junk that obscures what you are trying to communicate.\n\n**Encourage comparison.** Design graphics to facilitate comparison of different groups or conditions.\n\n**Represent magnitudes honestly.** The visual representation should be proportional to the numerical quantities being represented. Avoid truncated axes that exaggerate differences.\n\n**Minimize clutter.** Remove unnecessary grid lines, borders, and decorations. Every element should serve a purpose.\n\n**Make displays easy to interpret.** Use clear labels, appropriate colors, and logical organization.\n\n## Examples of Poor Graphics\n\nRecognizing bad graphics helps you avoid making them.\n\n![](../images/images_4a.003.jpeg){fig-align=\"center\"}\n\nTicker-tape style displays make it hard to see patterns. Lines connecting unrelated points mislead. Pie charts make comparisons difficult because humans are poor at judging angles. Three-dimensional effects distort perception without adding information.\n\n![](../images/images_4a.005.jpeg){fig-align=\"center\"}\n\n## A Famous Good Example\n\nCharles Minard's 1869 map of Napoleon's Russian campaign is often cited as one of the best statistical graphics ever made. It displays six variables: the size of the army, its location (latitude and longitude), direction of movement, temperature, and date—all in a single coherent image.\n\n![](../images/images_4a.009.jpeg){fig-align=\"center\"}\n\nThe graphic tells a story. You can see the army shrink as it advances, the devastating losses during the retreat, and the correlation with plummeting temperatures. No legend is needed; the meaning is immediately apparent.\n\n## Saving Plots\n\nSave plots with `ggsave()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create and save a plot\np <- ggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point()\n\nggsave(\"my_plot.png\", p, width = 8, height = 6, dpi = 300)\nggsave(\"my_plot.pdf\", p, width = 8, height = 6)\n```\n:::\n\n\nThe function infers the format from the file extension. Specify dimensions and resolution for publication-quality output.\n\n## Practice\n\nThe best way to learn ggplot2 is to use it. Take a dataset you care about and try different visualizations. Experiment with aesthetics, geoms, and facets. Read error messages carefully—they often point directly to the problem. The ggplot2 documentation and the R Graph Gallery (r-graph-gallery.com) provide extensive examples to learn from.\n",
    "supporting": [
      "06-data-visualization_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}